# formr

[![CRAN
status](https://www.r-pkg.org/badges/version/formr)](https://CRAN.R-project.org/package=formr)
[![Codecov test
coverage](https://codecov.io/gh/rubenarslan/formr/graph/badge.svg)](https://app.codecov.io/gh/rubenarslan/formr)

## The accompanying R package for the study framework [formr](https://github.com/rubenarslan/formr.org)

The formr R package provides a few convenience functions that may be
useful to the users of formr ([formr.org](https://formr.org)), an online
survey framework which heavily relies on R via
[openCPU](https://github.com/jeroenooms/opencpu). Some functions may be
useful to others too.

Some of the functions conveniently generate individual feedback
graphics, some are just shorthands to make certain common operations in
formr more palatable to R novices. A large number of functions help
connect to formr, extract data, correctly type data (dates, numbers,
text etc.), automatically aggregate items of a scale and so on.

The R package can be used inside formr.org, it is always loaded by
default.

## documentation

<https://rubenarslan.github.io/formr>

## install

If you want to install the R package locally (e.g.Â to connect to formr
and fetch the data in a nice format for you), run:

``` R
install.packages("remotes")
remotes::install_github("rubenarslan/formr")
```

# Package index

## Data Processing and Results

Functions for handling survey results and data processing

- [`formr_connect()`](http://rubenarslan.github.io/formr/reference/formr_connect.md)
  : Connect to formr
- [`formr_disconnect()`](http://rubenarslan.github.io/formr/reference/formr_disconnect.md)
  : Disconnect from formr
- [`formr_last_host()`](http://rubenarslan.github.io/formr/reference/formr_last_host.md)
  : Get the last specified host
- [`formr_store_keys()`](http://rubenarslan.github.io/formr/reference/formr_store_keys.md)
  : Store keys in keyring
- [`formr_items()`](http://rubenarslan.github.io/formr/reference/formr_items.md)
  : Download items from formr
- [`formr_item_displays()`](http://rubenarslan.github.io/formr/reference/formr_item_displays.md)
  : Download detailed result timings and display counts from formr
- [`formr_upload_items()`](http://rubenarslan.github.io/formr/reference/formr_upload_items.md)
  : Upload new item table
- [`formr_simulate_from_items()`](http://rubenarslan.github.io/formr/reference/formr_simulate_from_items.md)
  : Simulate data based on item table
- [`formr_results()`](http://rubenarslan.github.io/formr/reference/formr_results.md)
  : Download processed, aggregated results from formr
- [`formr_raw_results()`](http://rubenarslan.github.io/formr/reference/formr_raw_results.md)
  : Download data from formr
- [`formr_uploaded_files()`](http://rubenarslan.github.io/formr/reference/formr_uploaded_files.md)
  : Download uploaded files from formr
- [`formr_backup_files()`](http://rubenarslan.github.io/formr/reference/formr_backup_files.md)
  : Backup uploaded files from formr
- [`formr_post_process_results()`](http://rubenarslan.github.io/formr/reference/formr_post_process_results.md)
  : Processed, aggregated results
- [`formr_aggregate()`](http://rubenarslan.github.io/formr/reference/formr_aggregate.md)
  : Aggregate data based on item table
- [`formr_recognise()`](http://rubenarslan.github.io/formr/reference/formr_recognise.md)
  : Recognise data types based on item table
- [`formr_reverse()`](http://rubenarslan.github.io/formr/reference/formr_reverse.md)
  : Reverse items based on item table or a fallback_max
- [`formr_run_structure()`](http://rubenarslan.github.io/formr/reference/formr_run_structure.md)
  : Download run structure from formr
- [`formr_user_detail()`](http://rubenarslan.github.io/formr/reference/formr_user_detail.md)
  : Download random groups
- [`formr_user_overview()`](http://rubenarslan.github.io/formr/reference/formr_user_overview.md)
  : Download random groups
- [`formr_shuffled()`](http://rubenarslan.github.io/formr/reference/formr_shuffled.md)
  : Download random groups
- [`formr_backup_study()`](http://rubenarslan.github.io/formr/reference/formr_backup_study.md)
  : Backup a study
- [`formr_backup_surveys()`](http://rubenarslan.github.io/formr/reference/formr_backup_surveys.md)
  : Backup surveys

## formr OAuth API and Connection

Functions for OAuth API access and connection management

- [`formr_api_access_token()`](http://rubenarslan.github.io/formr/reference/formr_api_access_token.md)
  : Connect to formr API
- [`formr_api_results()`](http://rubenarslan.github.io/formr/reference/formr_api_results.md)
  : Get result from formr
- [`formr_api_session()`](http://rubenarslan.github.io/formr/reference/formr_api_session.md)
  : Get current API session Return or set URL in list form for formr API
  (if available)

## Item Management

Functions for managing survey items, scales, and related operations

- [`item()`](http://rubenarslan.github.io/formr/reference/item.md) : get
  item from survey attribute
- [`items()`](http://rubenarslan.github.io/formr/reference/items.md) :
  get item list from survey attributes
- [`aggregate_and_document_scale()`](http://rubenarslan.github.io/formr/reference/aggregate_and_document_scale.md)
  : Aggregate variables and remember which variables this were
- [`choice_labels_for_values()`](http://rubenarslan.github.io/formr/reference/choice_labels_for_values.md)
  : switch choice values with labels
- [`reverse_labelled_values()`](http://rubenarslan.github.io/formr/reference/reverse_labelled_values.md)
  : Reverse labelled values
- [`as.data.frame(`*`<formr_item_list>`*`)`](http://rubenarslan.github.io/formr/reference/as.data.frame.formr_item_list.md)
  : Transform formr_item_list into a data.frame for ease of use

## Feedback and Plotting

Functions for visualization and feedback generation

- [`qplot_on_normal()`](http://rubenarslan.github.io/formr/reference/qplot_on_normal.md)
  : Plot a normed value on the standard normal
- [`qplot_on_bar()`](http://rubenarslan.github.io/formr/reference/qplot_on_bar.md)
  : Plot normed values as a barchart
- [`qplot_on_polar()`](http://rubenarslan.github.io/formr/reference/qplot_on_polar.md)
  : Time-polar plot
- [`feedback_chunk()`](http://rubenarslan.github.io/formr/reference/feedback_chunk.md)
  : Text feedback based on groups

## Rendering and Markdown

Functions for rendering and markdown processing

- [`formr_render()`](http://rubenarslan.github.io/formr/reference/formr_render.md)
  : render text for formr
- [`formr_render_commonmark()`](http://rubenarslan.github.io/formr/reference/formr_render_commonmark.md)
  : render inline text for formr
- [`formr_inline_render()`](http://rubenarslan.github.io/formr/reference/formr_inline_render.md)
  : render inline text for formr
- [`formr_knit()`](http://rubenarslan.github.io/formr/reference/formr_knit.md)
  : knit rmarkdown to markdown for formr
- [`asis_knit_child()`](http://rubenarslan.github.io/formr/reference/asis_knit_child.md)
  : knit_child as is
- [`knit_prefixed()`](http://rubenarslan.github.io/formr/reference/knit_prefixed.md)
  : knit prefixed
- [`markdown_custom_options()`](http://rubenarslan.github.io/formr/reference/markdown_custom_options.md)
  : custom markdown options for rmarkdown's pandoc
- [`markdown_github()`](http://rubenarslan.github.io/formr/reference/markdown_github.md)
  : github_markdown for rmarkdown
- [`markdown_hard_line_breaks()`](http://rubenarslan.github.io/formr/reference/markdown_hard_line_breaks.md)
  : hard line breaks
- [`render_text()`](http://rubenarslan.github.io/formr/reference/render_text.md)
  : render text
- [`word_document()`](http://rubenarslan.github.io/formr/reference/word_document.md)
  : word_document from rmarkdown, but has an added option not to break
  on error
- [`paste.knit_asis()`](http://rubenarslan.github.io/formr/reference/paste.knit_asis.md)
  : paste.knit_asis
- [`print(`*`<knit_asis>`*`)`](http://rubenarslan.github.io/formr/reference/print.knit_asis.md)
  : Print new lines in knit_asis outputs

## Time and Messaging

Functions for time-related operations and messaging

- [`in_time_window()`](http://rubenarslan.github.io/formr/reference/in_time_window.md)
  : checks whether the current time is in a certain time window
- [`next_day()`](http://rubenarslan.github.io/formr/reference/next_day.md)
  : checks whether a new day has broken (date has increased by at least
  one day)
- [`time_passed()`](http://rubenarslan.github.io/formr/reference/time_passed.md)
  : checks how much time has passed relative to the user's last action
- [`text_message_clickatell()`](http://rubenarslan.github.io/formr/reference/text_message_clickatell.md)
  : Send text message via Clickatell
- [`text_message_massenversand()`](http://rubenarslan.github.io/formr/reference/text_message_massenversand.md)
  : Send text message via Massenversand.de
- [`text_message_twilio()`](http://rubenarslan.github.io/formr/reference/text_message_twilio.md)
  : Send text message via Twilio
- [`email_image()`](http://rubenarslan.github.io/formr/reference/email_image.md)
  : generates valid email cids

## Helper Functions

Utility functions and operators for common operations

- [`first()`](http://rubenarslan.github.io/formr/reference/first.md) :
  Gives the first non-missing element

- [`last()`](http://rubenarslan.github.io/formr/reference/last.md) :
  Gives the last non-missing element

- [`current()`](http://rubenarslan.github.io/formr/reference/current.md)
  : Gives the last element, doesn't omit missings

- [`finished()`](http://rubenarslan.github.io/formr/reference/finished.md)
  : How many surveys were finished?

- [`expired()`](http://rubenarslan.github.io/formr/reference/expired.md)
  : How many surveys were expired?

- [`if_na()`](http://rubenarslan.github.io/formr/reference/if_na.md) :
  Replace NA values with something else

- [`if_na_null()`](http://rubenarslan.github.io/formr/reference/if_na_null.md)
  : This function makes sure you know what to expect when evaluating
  uncertain results in an if-clause. In most cases, you should not use
  this function, because it can lump a lot of very different cases
  together, but it may have some use for fool-proofing certain
  if-clauses on formr.org, where a field in a survey may either not
  exist, be missing or have a value to check.

- [`ifelsena()`](http://rubenarslan.github.io/formr/reference/ifelsena.md)
  :

  Like [`ifelse()`](https://rdrr.io/r/base/ifelse.html), but allows you
  to assign a third value to missings.

- [`rescue_attributes()`](http://rubenarslan.github.io/formr/reference/rescue_attributes.md)
  : Rescue lost attributes

- [`` `%contains%` ``](http://rubenarslan.github.io/formr/reference/grapes-contains-grapes.md)
  : check whether a character string contains another

- [`` `%contains_word%` ``](http://rubenarslan.github.io/formr/reference/grapes-contains_word-grapes.md)
  : check whether a character string contains another as a word

- [`` `%begins_with%` ``](http://rubenarslan.github.io/formr/reference/grapes-begins_with-grapes.md)
  : check whether a character string begins with a string

- [`` `%ends_with%` ``](http://rubenarslan.github.io/formr/reference/grapes-ends_with-grapes.md)
  : check whether a character string ends with a string

- [`random_date_in_range()`](http://rubenarslan.github.io/formr/reference/random_date_in_range.md)
  : Random date in range

- [`get_opencpu_rds()`](http://rubenarslan.github.io/formr/reference/get_opencpu_rds.md)
  : pass in the url to the RDS representation of a openCPU session
  object, get the object

